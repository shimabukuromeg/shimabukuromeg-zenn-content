---
title: "ã‚ã‚‰ãŸã‚ã¦GraphiQLã‚’ã•ã‚ã£ã¦ã¿ã‚‹ã"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["GraphiQL"]
published: true
---

# ã¯ã˜ã‚ã«

å…ˆæ—¥GraphiQLã®v2ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸãã†ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€GraphiQLã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¤ã„ã¦ã€ã‚ã‚‰ãŸã‚ã¦èª¿ã¹ãŸã“ã¨ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

graphiql-explorer å°å…¥ã—ã¦ã‚‹demoãŒã™ã”ãä¾¿åˆ©ãã†ã ã£ãŸã®ã§ã€æ‰‹å…ƒã®ç’°å¢ƒã§å‹•ã‹ã—ã¦ã¿ã‚‹ã¨ã“ã‚ã¾ã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

https://twitter.com/GraphiQL/status/1562561433585733633

https://twitter.com/GraphiQL/status/1562579102535544832

V2ãƒªãƒªãƒ¼ã‚¹ã®å¤‰æ›´ç‚¹

https://github.com/graphql/graphiql/releases/tag/graphiql%402.0.0

# GraphiQLã¨ã¯

- ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼å†… GraphQL IDE
- GraphQL APIã‚’å©ã„ãŸã‚Šã€ã‚¹ã‚­ãƒ¼ãƒã‚’ç¢ºèªã§ãã‚‹ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«

https://github.com/graphql/graphiql


# äº‹å‰æº–å‚™

GraphiQLã‚’å‹•ã‹ã™ã«ã‚ãŸã£ã¦ã€GraphiQLã‚’å°å…¥ã™ã‚‹ãƒ•ãƒ­ãƒ³ãƒˆç’°å¢ƒã¨GraphQLAPIã‚’æä¾›ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚’æº–å‚™ã—ã¾ã™ã€‚

### GraphQLã‚µãƒ¼ãƒãƒ¼ç’°å¢ƒ

ä»¥å‰ Supabaseã®ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§GraphQLã‚µãƒ¼ãƒãƒ¼ã‚’å‹•ã‹ã—ã¦ã¿ãŸè¨˜äº‹ã‚’æ›¸ã„ãŸã®ã§ã™ãŒã€ä»Šå›ã‚‚ã“ã®ç’°å¢ƒã‚’å†åˆ©ç”¨ã—ã¾ã™ã€‚

https://zenn.dev/shimabukuromeg/articles/097d93b021f28a

### GraphiQLã‚’å‹•ã‹ã™ãƒ•ãƒ­ãƒ³ãƒˆã®ç’°å¢ƒ

GraphiQLã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã—ã¦ãã‚Œã¦ã‚‹ `GraphiQL` ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ `ReactDOM.render` ã§ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã ã‘ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

GraphiQLã‚’å‹•ã‹ã™ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ç’°å¢ƒã®æº–å‚™ã—ã¾ã™ã€‚ `yarn create vite` ã™ã‚‹ã€‚

```bash
$ yarn create vite
```

:::details `yarn create vite` å®Ÿè¡Œçµæœ
```bash
$ yarn create vite
yarn create v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...

success Installed "create-vite@3.0.2" with binaries:
      - create-vite
      - cva
âœ” Project name: â€¦ sample-graphiql
âœ” Select a framework: â€º react
âœ” Select a variant: â€º react-ts

Scaffolding project in /Users/shimabukuromeg/work/sample-graphiql...

Done. Now run:

  cd sample-graphiql
  yarn
  yarn dev

âœ¨  Done in 7.71s.
```
:::

# å°å…¥ã—ã¦ã¿ã‚‹

GraphiQLã® [README](https://github.com/graphql/graphiql/tree/main/packages/graphiql) ã‚’å‚è€ƒã«å°å…¥ã—ã¾ã™ã€‚

- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥

```bash
$ yarn add graphiql react react-dom graphql
```

- `src/main.tsx` ã‚’ç·¨é›†ã—ã¾ã™ã€‚

```typescript
import { createGraphiQLFetcher } from '@graphiql/toolkit';
import { GraphiQL } from 'graphiql';
import React from 'react';
import ReactDOM from 'react-dom';

import 'graphiql/graphiql.css';

const fetcher = createGraphiQLFetcher({
  url: import.meta.env.VITE_API_URL,
  headers: {
    Authorization: `Bearer ${import.meta.env.VITE_API_KEY}`,
    apikey: import.meta.env.VITE_API_KEY
  },
});

ReactDOM.render(<div style={{ height: "100vh" }}>
  <GraphiQL fetcher={fetcher} />
</div>, document.body);
```

:::message
- Supabaseã®Graphql APIã‚’å©ããŸã‹ã£ãŸã®ã§ã€fetcherãŒå°‘ã—READMEã¨é•ã„ã¾ã™ã€‚
- .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€supabaseã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨keyèª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
:::

- èµ·å‹•
```bash
$ yarn dev
```

- Queryå©ã‘ãŸ

![](https://storage.googleapis.com/zenn-user-upload/f97284e15f6c-20220829.png)

# ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã¿ã‚‹

ç¶šã„ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã¿ã¾ã™ã€‚

### ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«ãƒœã‚¿ãƒ³ã‚’ã¤ã‘ã¦ã¿ã‚‹

`ToolbarButton` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæä¾›ã•ã‚Œã¦ã‚‹ã®ã§ãã‚Œã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚
- `src/main.tsx` ã‚’ç·¨é›†ã—ã¾ã™ã€‚

```typescript
import { createGraphiQLFetcher } from '@graphiql/toolkit';
import { GraphiQL } from 'graphiql';
import React from 'react';
import ReactDOM from 'react-dom';
import {  ToolbarButton } from '@graphiql/react'; // è¿½åŠ 

import 'graphiql/graphiql.css';

const fetcher = createGraphiQLFetcher({
  url: import.meta.env.VITE_API_URL,
  headers: {
    Authorization: `Bearer ${import.meta.env.VITE_API_KEY}`,
    apikey: import.meta.env.VITE_API_KEY
  },
});

// è¿½åŠ 
const toolbar = {
  additionalContent: (
    <div className="button-group">
    <ToolbarButton
      label="ãƒœã‚¿ãƒ³A"
      onClick={() => window.alert('ãƒœã‚¿ãƒ³A')}
      style={{ backgroundColor: "red", color: "white", justifyContent: "center", alignItems: "center", display: "flex", flexDirection: "column", marginBottom: "10px" }}
    >A</ToolbarButton>
    <ToolbarButton
      label="ãƒœã‚¿ãƒ³B"
      onClick={() => window.alert('ãƒœã‚¿ãƒ³B')}
      style={{ backgroundColor: "blue", color: "white", justifyContent: "center", alignItems: "center", display: "flex", flexDirection: "column", marginBottom: "10px" }}
    >B</ToolbarButton>
  </div>
  ),
};

ReactDOM.render(<div style={{ height: "100vh" }}>
  <GraphiQL fetcher={fetcher} toolbar={toolbar} /> // è¿½åŠ 
</div>, document.body);
```

ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«ãƒœã‚¿ãƒ³ãŒã¤ã„ãŸ

![](https://storage.googleapis.com/zenn-user-upload/8703ff79b3fe-20220829.gif)

GraphiQLã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚³ãƒ¼ãƒ‰èª­ã‚“ã§ã¿ãŸ

https://github.com/graphql/graphiql/blob/main/packages/graphiql/src/components/GraphiQL.tsx#L300

### ãƒ­ã‚´ã‚’å¤‰æ›´ã—ã¦ã¿ã‚‹

ãƒ­ã‚´ã®å¤‰æ›´ã¯ã€GrapiQL ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å­è¦ç´ ã« `GraphiQL.Logo` ã‚’è¿½åŠ ã—ã¾ã™ã€‚
- `src/main.tsx` ã‚’ç·¨é›†ã—ã¾ã™ã€‚

```typescript
~ çœç•¥ ~
ReactDOM.render(<div style={{ height: "100vh" }}>
  <GraphiQL fetcher={fetcher} toolbar={toolbar}>
    <GraphiQL.Logo>ã‚µãƒ³ãƒ—ãƒ« GraphiQL</GraphiQL.Logo>
  </GraphiQL>
</div>, document.body);
```

![](https://storage.googleapis.com/zenn-user-upload/582e25a4deed-20220829.png)

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã¿ã‚‹

READMEã‚’èª­ã‚“ã§ã¿ã‚‹ã¨ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã†ã«ã¯ `title` ã¨ `icon` ã¨ `content` ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ãªã‚ˆã†ã§ã™ã€‚

> title: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å›ºæœ‰ã®ã‚¿ã‚¤ãƒˆãƒ« (ã‚µã‚¤ãƒ‰ãƒãƒ¼ ã‚¢ã‚¤ã‚³ãƒ³ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã‚‹ã¨ã€ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã«è¡¨ç¤ºã•ã‚Œã¾ã™)
icon: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«å«ã¾ã‚Œã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
content: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é–‹ã„ãŸã¨ãã«ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®æ¨ªã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

https://github.com/graphql/graphiql/tree/main/packages/graphiql#plugins

- `src/main.tsx` ã‚’ç·¨é›†ã—ã¾ã™ã€‚ã‚µã‚¤ãƒ‰ãƒãƒ¼ã« helloã¨ã„ã†æ–‡å­—åˆ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã ã‘ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚

```typescript
import { createGraphiQLFetcher } from '@graphiql/toolkit';
import { GraphiQL, } from 'graphiql';
import React from 'react';
import ReactDOM from 'react-dom';
import {
  ToolbarButton, GraphiQLPlugin //è¿½åŠ 
} from '@graphiql/react';

// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¿½åŠ 
const explorerPluginExample: GraphiQLPlugin = {
  title: 'GraphiQL Explorer Example',
  icon: () => (
    <svg height="1em" strokeWidth="1.5" viewBox="0 0 24 24" fill="none">
      <path
        d="M18 6H20M22 6H20M20 6V4M20 6V8"
        stroke="current Color"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      <path
        d="M21.4 20H2.6C2.26863 20 2 19.7314 2 19.4V11H21.4C21.7314 11 22 11.2686 22 11.6V19.4C22 19.7314 21.7314 20 21.4 20Z"
        stroke="currentColor"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      <path
        d="M2 11V4.6C2 4.26863 2.26863 4 2.6 4H8.77805C8.92127 4 9.05977 4.05124 9.16852 4.14445L12.3315 6.85555C12.4402 6.94876 12.5787 7 12.722 7H14"
        stroke="currentColor"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    </svg>
  ),
  content: () => <div>hello</div>,
};

ReactDOM.render(<div style={{ height: "100vh" }}>
  <GraphiQL
    fetcher={fetcher}
    toolbar={toolbar}
    plugins={[explorerPluginExample]} // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¿½åŠ 
  >
    <GraphiQL.Logo>ã‚µãƒ³ãƒ—ãƒ« GraphiQL</GraphiQL.Logo>
  </GraphiQL>
</div>, document.body);

```

ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ

![](https://storage.googleapis.com/zenn-user-upload/6f16ff8f3e36-20220829.gif)


### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«exploerã‚’ã¤ã‘ã¦ã¿ã‚‹

ä»Šå›ä¸€ç•ªè©¦ã—ãŸã‹ã£ãŸã“ã¨ãªã®ã§ã™ãŒã€graphiql-explorerã‚’ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§è¡¨ç¤ºã•ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã—ã¦è¡¨ç¤ºã•ãˆã‚‹ã‚³ãƒ¼ãƒ‰è‡ªä½“ã¯ example ã®å®Ÿè£…ã‚’å‚è€ƒã«ã—ã¾ã™ã€‚

https://github.com/graphql/graphiql/tree/main/examples/graphiql-explorer

- graphiql-explorer ã‚’å°å…¥ã—ã¾ã™ã€‚

https://github.com/OneGraph/graphiql-explorer

```bash
$ yarn add graphiql-explorer
```

- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```bash
$ mkdir -p src/graphiql-plugin/explorer
```

:::details ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®contentã«è¡¨ç¤ºã™ã‚‹ graphiql-explorer ã‚’ä½œæˆã™ã‚‹

- `src/graphiql-plugin/explorer/ExplorerPlugin.tsx` ã®ç·¨é›†

```typescript
import {
    useEditorContext,
    useExecutionContext,
    useSchemaContext,
} from '@graphiql/react';

import { useContext } from 'react';
import GraphiQLExplorer from 'graphiql-explorer';
import { QueryContext } from './QueryContext';

export function ExplorerPlugin() {
    const { setOperationName } = useEditorContext({ nonNull: true });
    const { schema } = useSchemaContext({ nonNull: true });
    const { run } = useExecutionContext({ nonNull: true });

    const { query, setQuery } = useContext(QueryContext);

    return (
        <GraphiQLExplorer
            schema={schema}
            query={query}
            onEdit={(newQuery: string) => setQuery(newQuery)}
            onRunOperation={(operationName: string | undefined) => {
                if (operationName) {
                    setOperationName(operationName);
                }
                run();
            }}
            explorerIsOpen
            colors={{
                keyword: 'hsl(var(--color-primary))',
                def: 'hsl(var(--color-tertiary))',
                property: 'hsl(var(--color-info))',
                qualifier: 'hsl(var(--color-secondary))',
                attribute: 'hsl(var(--color-info))',
                number: 'hsl(var(--color-success))',
                string: 'hsl(var(--color-warning))',
                builtin: 'hsl(var(--color-success))',
                string2: 'hsl(var(--color-secondary))',
                variable: 'hsl(var(--color-secondary))',
                atom: 'hsl(var(--color-tertiary))',
                meta: 'hsl(var(--color-tertiary))',
            }}
            arrowOpen={
                <svg
                    viewBox="0 -4 13 15"
                    style={{
                        color: 'hsla(var(--color-neutral), 0.4)',
                        marginRight: 'var(--px-4)',
                        height: 'var(--px-16)',
                        width: 'var(--px-16)',
                    }}
                >
                    <path
                        d="M3.35355 6.85355L6.14645 9.64645C6.34171 9.84171 6.65829 9.84171 6.85355 9.64645L9.64645 6.85355C9.96143 6.53857 9.73835 6 9.29289 6L3.70711 6C3.26165 6 3.03857 6.53857 3.35355 6.85355Z"
                        fill="currentColor"
                    />
                </svg>
            }
            arrowClosed={
                <svg
                    viewBox="0 -2 13 15"
                    style={{
                        color: 'hsla(var(--color-neutral), 0.4)',
                        marginRight: 'var(--px-4)',
                        height: 'var(--px-16)',
                        width: 'var(--px-16)',
                    }}
                >
                    <path
                        d="M6.35355 11.1464L9.14645 8.35355C9.34171 8.15829 9.34171 7.84171 9.14645 7.64645L6.35355 4.85355C6.03857 4.53857 5.5 4.76165 5.5 5.20711V10.7929C5.5 11.2383 6.03857 11.4614 6.35355 11.1464Z"
                        fill="currentColor"
                    />
                </svg>
            }
            checkboxUnchecked={
                <svg
                    viewBox="0 0 15 15"
                    style={{
                        color: 'hsla(var(--color-neutral), 0.4)',
                        marginRight: 'var(--px-4)',
                        height: 'var(--px-16)',
                        width: 'var(--px-16)',
                    }}
                >
                    <circle cx="7.5" cy="7.5" r="6" stroke="currentColor" fill="none" />
                </svg>
            }
            checkboxChecked={
                <svg
                    viewBox="0 0 15 15"
                    style={{
                        color: 'hsl(var(--color-info))',
                        marginRight: 'var(--px-4)',
                        height: 'var(--px-16)',
                        width: 'var(--px-16)',
                    }}
                >
                    <circle cx="7.5" cy="7.5" r="7.5" fill="currentColor" />
                    <path
                        d="M4.64641 7.00106L6.8801 9.23256L10.5017 5.61325"
                        fill="none"
                        stroke="white"
                        strokeWidth="1.5"
                    />
                </svg>
            }
            styles={{
                buttonStyle: {
                    backgroundColor: 'transparent',
                    border: 'none',
                    color: 'hsla(var(--color-neutral), 0.6)',
                    cursor: 'pointer',
                    fontSize: '1em',
                },
                explorerActionsStyle: {
                    padding: 'var(--px-8) var(--px-4)',
                },
                actionButtonStyle: {
                    backgroundColor: 'transparent',
                    border: 'none',
                    color: 'hsla(var(--color-neutral), 0.6)',
                    cursor: 'pointer',
                    fontSize: '1em',
                },
            }}
        />
    );
}
```
:::


:::details graphiql-explorer ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‹ã‚‰ã‚¯ã‚¨ãƒªã‚’ã‚»ãƒƒãƒˆã§ãã‚‹ã‚ˆã†ã«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹
- `src/graphiql-plugin/explorer/QueryContext.tsx` ã®ç·¨é›†
```typescript
import {
    createContext,
    Dispatch,
    SetStateAction,
} from 'react';

export type QueryContextType = {
    query: string;
    setQuery: Dispatch<SetStateAction<string>>;
};

export const QueryContext = createContext<QueryContextType>({
    query: '',
    setQuery: () => { },
});
```
:::


:::details graphiql-explorerã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã™ã‚‹

- `src/graphiql-explorer.d.ts` ã®ç·¨é›†

```typescript
declare module 'graphiql-explorer' {
  import { GraphQLEnumType, GraphQLScalarType, ValueNode } from 'graphql';
  import { ComponentType } from 'react';

  const GraphiQLExplorer: ComponentType<any> & {
    defaultValue: (arg: GraphQLEnumType | GraphQLScalarType) => ValueNode;
  };

  export default GraphiQLExplorer;
}
```
:::


:::details ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã™ã‚‹

- `src/index.css` ã®ç·¨é›†

```
body {
  margin: 0;
}
#root {
  height: 100vh;
}
.docExplorerWrap {
  height: unset !important;
  min-width: unset !important;
  width: unset !important;
}
.doc-explorer-title {
  font-size: var(--font-size-h2);
  font-weight: var(--font-weight-medium);
}
.doc-explorer-rhs {
  display: none;
}
.graphiql-explorer-root {
  font-family: var(--font-family-mono) !important;
  font-size: var(--font-size-body) !important;
  padding: 0 !important;
}
.graphiql-explorer-root > div:first-child {
  padding-left: var(--px-8);
}
.graphiql-explorer-root input {
  background: hsl(var(--color-base));
}
.graphiql-explorer-root select {
  background-color: hsl(var(--color-base));
  border: 1px solid hsla(var(--color-neutral), 0.6);
  border-radius: var(--border-radius-4);
  color: hsl(var(--color-neutral));
  margin: 0 var(--px-4);
  padding: var(--px-4) var(--px-6);
}
```
:::


:::details GraphiQLã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«graphiql-explorerã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ¸¡ã™

- `src/main.tsx` ã®ç·¨é›†

```typescript
import { createGraphiQLFetcher } from '@graphiql/toolkit';
import { GraphiQL, } from 'graphiql';
import React, { useMemo, useState } from 'react';
import ReactDOM from 'react-dom';
import {
  GraphiQLPlugin
} from '@graphiql/react';
import 'graphiql/graphiql.css';
import { ExplorerPlugin } from './graphiql-plugin/explorer/ExplorerPlugin';
import { QueryContext } from './graphiql-plugin/explorer/QueryContext';

const fetcher = createGraphiQLFetcher({
  url: import.meta.env.VITE_API_URL,
  headers: {
    Authorization: `Bearer ${import.meta.env.VITE_API_KEY}`,
    apikey: import.meta.env.VITE_API_KEY
  },
});

const explorerPlugin: GraphiQLPlugin = {
  title: 'GraphiQL Explorer',
  icon: () => (
    <svg height="1em" strokeWidth="1.5" viewBox="0 0 24 24" fill="none">
      <path
        d="M18 6H20M22 6H20M20 6V4M20 6V8"
        stroke="current Color"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      <path
        d="M21.4 20H2.6C2.26863 20 2 19.7314 2 19.4V11H21.4C21.7314 11 22 11.2686 22 11.6V19.4C22 19.7314 21.7314 20 21.4 20Z"
        stroke="currentColor"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      <path
        d="M2 11V4.6C2 4.26863 2.26863 4 2.6 4H8.77805C8.92127 4 9.05977 4.05124 9.16852 4.14445L12.3315 6.85555C12.4402 6.94876 12.5787 7 12.722 7H14"
        stroke="currentColor"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    </svg>
  ),
  content: () => <ExplorerPlugin />,
};

const GraphiQLApp = () => {
  const [query, setQuery] = useState<string>('');
  return (
    <QueryContext.Provider
      value={useMemo(() => ({ query, setQuery }), [query])}
    >
      <div style={{ height: "100vh" }}>
        <GraphiQL fetcher={fetcher} plugins={[explorerPlugin]} query={query}
          onEditQuery={newQuery => setQuery(newQuery)}>
          <GraphiQL.Logo>ã‚µãƒ³ãƒ—ãƒ« GraphiQL</GraphiQL.Logo>
        </GraphiQL>
      </div>
    </QueryContext.Provider>
  )
}

ReactDOM.render(<GraphiQLApp />, document.body);
```
:::

å®Œæˆï¼ï¼ï¼

![](https://storage.googleapis.com/zenn-user-upload/08b3b65261f1-20220829.gif)

# ãŠã‚ã‚Šã«


- GraphiqlãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã¨çŸ¥ã‚‰ãªã‹ã£ãŸã®ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è‰²ã€…ç·¨é›†ã—ãŸã‚‰ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã ã¨ã„ã†ã“ã¨ã‚’çŸ¥ã‚Œã¦è‰¯ã‹ã£ãŸ
- ã‚¯ã‚¨ãƒªæ›¸ãã®åœ°å‘³ã«æ‰‹é–“ã ã£ãŸã‚Šã™ã®ã§ã€graphiql-explorer ã§ç”»é¢ã½ã¡ã½ã¡ã—ã¦ã‚‹ã ã‘ã§ã‚¯ã‚¨ãƒªä½œã‚Œã‚‹ã®ã¯ä¾¿åˆ©


# å‚è€ƒ

https://developer.hatenastaff.com/entry/2021/05/14/093000